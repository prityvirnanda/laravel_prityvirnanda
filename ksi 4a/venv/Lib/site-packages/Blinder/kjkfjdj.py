import getpass

def create_account():
    username = input("Enter a username: ")
    password = getpass.getpass("Enter a password: ")

    # Check if the username already exists
    if check_username_exists(username):
        print("Username already exists. Please choose a different username.")
        create_account()
    else:
        # Save the username and password to the user database
        with open("user_database.txt", "a") as file:
            file.write(f"{username}:{password}\n")
        print("Account created successfully!")

def login():
    username = input("Enter your username: ")
    password = getpass.getpass("Enter your password: ")

    # Check if the username and password match
    if check_credentials(username, password):
        print("Login successful!")
        # Proceed to the restricted section or perform desired actions
        access_restricted_section(username)
    else:
        print("Invalid username or password. Please try again.")
        login()

def check_username_exists(username):
    # Check if the username already exists in the user database
    with open("user_database.txt", "r") as file:
        for line in file:
            if line.startswith(username + ":"):
                return True
    return False

def check_credentials(username, password):
    # Check if the username and password match a user in the database
    with open("user_database.txt", "r") as file:
        for line in file:
            stored_username, stored_password = line.strip().split(":")
            if stored_username == username and stored_password == password:
                return True
    return False

def access_restricted_section(username):
    print(f"Welcome to the restricted section, {username}!")
    # Perform actions specific to the restricted section

# Login Menu
print("Welcome!")
print("1. Create an Account")
print("2. Login")

choice = input("Enter your choice (1 or 2): ")

if choice == "1":
    create_account()
elif choice == "2":
    login()
else:
    print("Invalid choice. Please try again.")
